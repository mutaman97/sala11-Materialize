import{r as j}from"./validators-DD7Euqo8.js";import{A as q,r as T,x as Fe,o as D,e as P,w as g,a as c,u as m,R as Z,d as B,t as O,b as y,h as $,i as W,V as M,f as C,Z as ze,m as Ke,n as Re,q as Ue,s as qe,W as Me,Y as He,c as V,F as X,j as G,a6 as Ze,am as ie,an as Y,z as We,g as Xe}from"./main-Cw78g-lL.js";import{_ as Je}from"./AppDateTimePicker-utG13YR7.js";import{_ as Ye}from"./AppDrawerHeaderSection-DQSFeDAa.js";import{P as je}from"./vue3-perfect-scrollbar.esm-Bq_YvC2Z.js";import{V as Ge}from"./VDivider-qVXjHTOM.js";import{V as Q}from"./VForm-CQfhZNSg.js";import{V as ve}from"./VCardText-CmcafK4F.js";import{a as Qe,V as z}from"./VRow-BG5I4kc3.js";import{V as ue}from"./VTextField-BKkE6jAr.js";import{V as me}from"./VSelect-Bd1XwiRx.js";import{V as De}from"./VChip-BmMdWnsY.js";import{V as Ne}from"./VAvatar-BFNrWSvb.js";import{V as se}from"./VImg-DHwMjE9V.js";import{V as ye}from"./VTooltip-Csjob21H.js";import{V as et}from"./VFileInput-7IffHaRs.js";import{V as we}from"./VTextarea-Bm1ez4Lx.js";import{V as tt}from"./VNavigationDrawer-C2oWxnQR.js";import{_ as nt}from"./MoreBtn-CMrC8hcg.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as rt}from"./VSpacer-B4bUzx1D.js";import{V as ot}from"./VMenu-DypGLeY7.js";import{V as lt}from"./VList-DJjA2_W7.js";import{V as it}from"./VCard-DLuue0SI.js";import{u as st}from"./useApi-DW-wMX_v.js";import{$ as L}from"./api-COQrmxD3.js";import"./helpers-cDhjtOJI.js";import"./VField-Chh8HzJD.js";import"./form-wczSFyJg.js";import"./index-DhMs0plD.js";import"./easing-DY7PVvcf.js";import"./VInput-B2AKhCeD.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-Dgzvj9pV.js";import"./dialog-transition-DYOtB0Vc.js";import"./VOverlay-DS9RY67J.js";import"./lazy-Dz28_Vpk.js";import"./scopeId-Dq-41LqQ.js";import"./VCheckboxBtn-BX36Snjb.js";import"./VSelectionControl-DVPi5H3e.js";import"./VSlideGroup-BHv8mlqE.js";import"./ssrBoot-B8feSXE9.js";import"./index-CvdUsmOx.js";function dt(e,t){var n=!1;return function(...a){n||(e.call(null,...a),n=!0,setTimeout(function(){n=!1},t))}}function ke(e){return e.split(" ").filter(t=>t)}var xe=typeof window<"u";function K(e,t,n=!1){if(!t)return;const a=ke(t);if(a.length&&!a.includes("longTouch"))for(const r of e){if(!J(r)||!S.has(r)){r.classList.add(...a);continue}const l=[],o=S.get(r);if(o){for(const d of a)r.classList.contains(d)?r.classList.contains(d)&&n===!1&&l.push(d):r.classList.add(d);o.privateClasses=l,S.set(r,o)}}}function ee(e,t){if(!t)return;const n=ke(t);if(n.length)for(const a of e){if(!J(a)){a.classList.remove(...n);continue}const r=S.get(a);if(r)for(const l of n)r.privateClasses.includes(l)||a.classList.remove(l)}}function Te(e){let t=e.parentNode;for(;t!==null&&t.nodeType===1&&t instanceof HTMLElement;){const a=window.getComputedStyle(t).getPropertyValue("overflow");if(a==="scroll"||a==="auto")return t;t=t.parentNode}return document.documentElement}function ct(e){if(!(e.e instanceof TouchEvent))return;const t=e.e.touches[0].clientX,n=e.e.touches[0].clientY;let a=document.elementFromPoint(t,n);if(!J(a))return;let r,l=!0;for(;a&&l;){if(S.has(a)||E.has(a)){l=!1,r=E.has(a);break}a=a.parentNode}if(r){const o=E.get(a);return o?{parent:{el:a,data:o}}:void 0}else{const o=S.get(a);if(!o)return;const d=E.get(a.parentNode);return d?{node:{el:a,data:o},parent:{el:a.parentNode,data:d}}:void 0}}function J(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function Ve(e,t){const n=new AbortController;for(const a in t){const r=t[a];e.addEventListener(a,r,{signal:n.signal,passive:!1})}return n}function Ie(e,t,n=!1){const a=window.getComputedStyle(e),r=["position","z-index","top","left","x","pointer-events","y","transform-origin","filter","-webkit-text-fill-color"];for(const l of Array.from(a))n===!1&&l&&r.includes(l)||t.style.setProperty(l,a.getPropertyValue(l),a.getPropertyPriority(l));for(const l of Array.from(e.children)){if(!J(l))continue;const o=t.children[Array.from(e.children).indexOf(l)];Ie(l,o,n)}}function R(e){return e instanceof DragEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}Array();var pe=[{transform:"translateY(100%)"},{transform:"translateY(0)"}],ge=[{transform:"translateY(-100%)"},{transform:"translateY(0)"}],oe=[{transform:"translateX(100%)"},{transform:"translateX(0)"}],le=[{transform:"translateX(-100%)"},{transform:"translateX(0)"}];function Ce(e={}){return t=>{const n=E.get(t);if(n)return{setup(){n.config.remapFinished=()=>{},document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(a){if(!i)return;const r=e.duration||150;if(a.nodeData.value===i.draggedNode.data.value){switch(i.incomingDirection){case"below":_(a.node,pe,r);break;case"above":_(a.node,ge,r);break;case"left":_(a.node,le,r);break;case"right":_(a.node,oe,r);break}return}if(!i.affectedNodes.map(h=>h.data.value).includes(a.nodeData.value))return;const l=a.node.getBoundingClientRect(),o=i.affectedNodes.findIndex(h=>h.data.value===a.nodeData.value),s=i.draggedNode.data.index>=i.targetIndex;let u;if(s?u=i.affectedNodes[o+1]?i.affectedNodes[o+1]:i.affectedNodes[o-1]:u=i.affectedNodes[o-1]?i.affectedNodes[o-1]:i.affectedNodes[o+1],u){const h=Math.abs(l.x-u.el.getBoundingClientRect().x),k=Math.abs(l.y-u.el.getBoundingClientRect().y);h>k&&s?_(a.node,le,r):h>k&&!s&&_(a.node,oe,r)}else switch(i.incomingDirection){case"below":_(a.node,ge,r);break;case"above":_(a.node,pe,r);break;case"left":_(a.node,oe,r);break;case"right":_(a.node,le,r);break}}}}}function _(e,t,n){i&&(i.preventEnter=!0,e.animate(t,{duration:n}),setTimeout(()=>{i&&(i.swappedNodeValue=void 0,i.remapJustFinished=!0,i.lastTargetValue=void 0,i.preventEnter=!1)},n))}var he={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},S=new WeakMap,E=new WeakMap,i=void 0;function ut(){i=void 0}function Pe(e){return i={ascendingDirection:!1,incomingDirection:void 0,enterCount:0,targetIndex:0,affectedNodes:[],lastValue:void 0,activeNode:void 0,lastTargetValue:void 0,remapJustFinished:!1,preventEnter:!1,clonedDraggedEls:[],swappedNodeValue:!1,originalZIndex:void 0,...e},i}function ft(e,t){return i={...e,...t},i}function Be(e){const{x:t,y:n}=R(e.e);return{coordinates:{x:t,y:n},draggedNode:{el:e.targetData.node.el,data:e.targetData.node.data},draggedNodes:[{el:e.targetData.node.el,data:e.targetData.node.data}],initialIndex:e.targetData.node.data.index,initialParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},lastParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},scrollParent:Te(e.targetData.node.el)}}function mt(e,t){const n=Ee(e),r=[...de(t.targetData.parent.el,t.targetData.parent.data).filter(l=>!n.includes(l))];r.splice(t.targetData.node.data.index,0,...n),e.lastTargetValue=t.targetData.node.data.value,ce(t.targetData.parent.el,t.targetData.parent.data,[...r])}function de(e,t){return[...t.getValues(e)]}function ce(e,t,n){t.setValues(n,e)}function Ee(e){return[...e.draggedNodes.map(t=>t.data.value)]}function pt({parent:e,getValues:t,setValues:n,config:a={}}){var l,o;if(!xe)return;document.addEventListener("dragover",d=>{if(d.preventDefault(),i){i.remapJustFinished=!1,i.lastTargetValue=void 0;const{x:s,y:u}=R(d);i.coordinates.y=u,i.coordinates.x=s,ne()}}),gt(e);const r={getValues:t,setValues:n,config:{handleDragstart:Dt,handleDragoverNode:Ht,handleDragoverParent:Zt,handleEnd:Pt,handleTouchstart:Et,handleTouchmove:$t,handleTouchOverNode:xt,handleTouchOverParent:Wt,performSort:mt,performTransfer:jt,root:document,setupNode:Tt,setupNodeRemap:Se,reapplyDragClasses:Vt,tearDownNode:Ct,tearDownNodeRemap:It,remapFinished:vt,scrollBehavior:{x:.8,y:.8},threshold:{horizontal:0,vertical:0},...a},enabledNodes:[],abortControllers:{}};ht(e,r),(l=a.plugins)==null||l.forEach(d=>{var s,u;(u=(s=d(e))==null?void 0:s.tearDown)==null||u.call(s)}),(o=a.plugins)==null||o.forEach(d=>{var s,u;(u=(s=d(e))==null?void 0:s.setup)==null||u.call(s)}),te(e,!0)}function gt(e){const t=E.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function ht(e,t){new MutationObserver(bt).observe(e,{childList:!0}),E.set(e,t),t.abortControllers.mainParent=Ve(e,{dragover:Gt(dt(t.config.handleDragoverParent,10)),touchOverParent:t.config.handleTouchOverParent})}function bt(e){const t=e[0].target;t instanceof HTMLElement&&te(t)}function te(e,t){const n=E.get(e);if(!n)return;const a=[],r=n.config;for(let d=0;d<e.children.length;d++){const s=e.children[d];if(!J(s))continue;const u=S.get(s);(t||!u)&&r.tearDownNode({node:s,parent:e,nodeData:u,parentData:n}),!r.disabled&&(!r.draggable||r.draggable&&r.draggable(s))&&a.push(s)}if(a.length!==n.getValues(e).length&&!r.disabled){console.warn("The number of enabled nodes does not match the number of values.");return}const l=n.getValues(e),o=[];for(let d=0;d<a.length;d++){const s=a[d],u=S.get(s),h=Object.assign(u??{privateClasses:[],abortControllers:{}},{value:l[d],index:d});if(i&&h.value===i.draggedNode.data.value&&(i.draggedNode.data=h,i.draggedNode.el=s),i&&i.draggedNodes.map(w=>w.data.value).includes(h.value)){const w=i.draggedNodes.find(p=>p.data.value===h.value);w&&(w.el=s)}o.push({el:s,data:h});const k={node:s,parent:e,parentData:n,nodeData:h};(t||!u)&&r.setupNode(k),Se(k)}E.set(e,{...n,enabledNodes:o}),r.remapFinished(n)}function vt(){i&&(i.preventEnter=!1,i.swappedNodeValue=void 0,i.remapJustFinished=!0)}function Dt(e){e.e instanceof DragEvent&&kt({e:e.e,targetData:e.targetData})}function Nt(e,t,n){K([e],t),setTimeout(()=>{ee([e],t),K([e],n)})}function yt(e){const t=Pe(Be(e));return e.e.stopPropagation(),e.e.dataTransfer&&(e.e.dataTransfer.dropEffect="move",e.e.dataTransfer.effectAllowed="move",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY)),t}function _e(e){if(!(e.e instanceof DragEvent)&&!(e.e instanceof TouchEvent))return!1;const t=e.targetData.parent.data.config;if(!t.dragHandle)return!0;const n=e.targetData.node.el.querySelectorAll(t.dragHandle);if(!n)return!1;const a=R(e.e),r=t.root.elementFromPoint(a.x,a.y);if(!r)return!1;for(const l of Array.from(n))if(r===l||l.contains(r))return!0;return!1}function wt(e){if(!_e(e))return;const t=_t(e);St(e,t),At(e,t)}function kt(e){if(!_e(e)){e.e.preventDefault();return}const t=e.targetData.parent.data.config,n=yt(e),a=e.targetData.node.el.style.zIndex;n.originalZIndex=a,e.targetData.node.el.style.zIndex="9999",Nt(n.draggedNode.el,t.draggingClass,t.dropZoneClass)}function xt(e){i&&(e.detail.targetData.parent.el===i.lastParent.el?Le(e.detail,i):ae(e.detail,i))}function Tt(e){var n;const t=e.parentData.config;e.node.draggable=!0,e.nodeData.abortControllers.mainNode=Ve(e.node,{dragstart:U(t.handleDragstart),dragover:U(t.handleDragoverNode),dragend:U(t.handleEnd),touchstart:U(t.handleTouchstart),touchmove:U(t.handleTouchmove),touchend:U(t.handleEnd),touchOverNode:t.handleTouchOverNode}),t.reapplyDragClasses(e.node,e.parentData),(n=e.parentData.config.plugins)==null||n.forEach(a=>{var r,l;(l=(r=a(e.parent))==null?void 0:r.setupNode)==null||l.call(r,e)})}function Se(e){var t;S.set(e.node,e.nodeData),(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,r;(r=(a=n(e.parent))==null?void 0:a.setupNodeRemap)==null||r.call(a,e)})}function Vt(e,t){if(!i)return;const n="touchedNode"in i?t.config.touchDropZoneClass:t.config.dropZoneClass;i.draggedNode.el===e&&K([e],n,!0)}function It(e){var t;(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,r;(r=(a=n(e.parent))==null?void 0:a.tearDownNodeRemap)==null||r.call(a,e)})}function Ct(e){var t,n,a,r,l;(t=e.parentData.config.plugins)==null||t.forEach(o=>{var d,s;(s=(d=o(e.parent))==null?void 0:d.tearDownNode)==null||s.call(d,e)}),e.node.draggable=!1,(a=(n=e.nodeData)==null?void 0:n.abortControllers)!=null&&a.mainNode&&((l=(r=e.nodeData)==null?void 0:r.abortControllers)==null||l.mainNode.abort())}function Pt(e){i&&(Bt(e,i),ut())}function Bt(e,t){var l,o,d,s;document.removeEventListener("contextmenu",Ae),"longTouchTimeout"in t&&t.longTouchTimeout&&clearTimeout(t.longTouchTimeout);const n=(l=E.get(t.initialParent.el))==null?void 0:l.config,r="touchedNode"in t?n==null?void 0:n.touchDropZoneClass:n==null?void 0:n.dropZoneClass;t.originalZIndex!==void 0&&(t.draggedNode.el.style.zIndex=t.originalZIndex),K(t.draggedNodes.map(u=>u.el),r,!0),ee(t.draggedNodes.map(u=>u.el),r),n!=null&&n.longTouchClass&&ee(t.draggedNodes.map(u=>u.el),(d=(o=t.initialParent.data)==null?void 0:o.config)==null?void 0:d.longTouchClass),"touchedNode"in t&&((s=t.touchedNode)==null||s.remove())}function Et(e){e.e instanceof TouchEvent&&wt({e:e.e,targetData:e.targetData})}function _t(e){e.e.stopPropagation();const t=e.targetData.node.el.cloneNode(!0),n=e.targetData.node.el.getBoundingClientRect();return ft(Pe(Be(e)),{coordinates:{x:e.e.touches[0].clientX,y:e.e.touches[0].clientY},scrollParent:Te(e.targetData.node.el),touchStartLeft:e.e.touches[0].clientX-n.left,touchStartTop:e.e.touches[0].clientY-n.top,touchedNode:t,touchMoving:!1})}function Ae(e){e.preventDefault()}function St(e,t){t.touchedNodeDisplay=t.touchedNode.style.display;const n=e.targetData.node.el.getBoundingClientRect();t.touchedNode.style.cssText=`
            width: ${n.width}px;
            position: fixed;
            pointer-events: none;
            top: -9999px;
            z-index: 999999;
            display: none;
          `,document.body.append(t.touchedNode),Ie(e.targetData.node.el,t.touchedNode),t.touchedNode.style.display="none",document.addEventListener("contextmenu",Ae)}function At(e,t){const n=e.targetData.parent.data.config;n.longTouch&&(t.longTouchTimeout=setTimeout(()=>{t&&(t.longTouch=!0,n.longTouchClass&&e.e.cancelable&&K(t.draggedNodes.map(a=>a.el),n.longTouchClass),e.e.preventDefault())},n.longTouchTimeout||200))}function $t(e){!i||!("touchedNode"in i)||Mt(e,i)}function Lt(e,t){t.longTouchClass&&ee(e.draggedNodes.map(n=>n.el),t==null?void 0:t.longTouchClass),t.touchDraggingClass&&K([e.touchedNode],t.touchDraggingClass),t.touchDropZoneClass&&K(e.draggedNodes.map(n=>n.el),t.touchDropZoneClass)}function Ot(e){if(!e||!e.scrollParent)return;const{x:t,y:n,width:a,height:r}=e.scrollParent.getBoundingClientRect(),{x:l,y:o,scrollOutside:d}=e.lastParent.data.config.scrollBehavior;return{state:e,xThresh:l,yThresh:o,scrollOutside:d,scrollParent:e.scrollParent,x:t,y:n,width:a,height:r}}function Ft(e){const t=Ot(i);if(t)switch(e){case"down":return Ut(t.state,t);case"up":return Rt(t.state,t);case"right":return zt(t.state,t);case"left":return Kt(t.state,t)}}function zt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n<0)&&n<(1-t.xThresh)*t.scrollParent.clientWidth&&!(t.scrollParent.scrollLeft+t.scrollParent.clientWidth>=t.scrollParent.scrollWidth))return e}function Kt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n>t.scrollParent.clientWidth)&&n>t.xThresh*t.scrollParent.clientWidth&&t.scrollParent.scrollLeft!==0)return e}function Rt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n>t.scrollParent.clientHeight)&&n>t.yThresh*t.scrollParent.clientHeight&&t.scrollParent.scrollTop!==0)return e}function Ut(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n<0)&&n<(1-t.yThresh)*t.scrollParent.clientHeight&&!(t.scrollParent.scrollTop+t.scrollParent.clientHeight>=t.scrollParent.scrollHeight))return e}function qt(e,t){t.touchMoving=!0,t.touchedNode.style.display=t.touchedNodeDisplay||"";const{x:n,y:a}=R(e.e);t.coordinates.y=a,t.coordinates.x=n;const r=t.touchStartLeft??0,l=t.touchStartTop??0;t.touchedNode.style.left=`${n-r}px`,t.touchedNode.style.top=`${a-l}px`,Lt(t,e.targetData.parent.data.config)}function Mt(e,t){if(e.targetData.parent.data.config.longTouch&&!t.longTouch){clearTimeout(t.longTouchTimeout);return}e.e.cancelable&&e.e.preventDefault(),qt(e,t),ne();const a=ct(e);if(!a)return;const r={e:e.e,targetData:a};"node"in a?a.node.el.dispatchEvent(new CustomEvent("touchOverNode",{detail:r})):a.parent.el.dispatchEvent(new CustomEvent("touchOverParent",{detail:r}))}function ne(){for(const e of Object.keys(he)){const[t,n]=he[e];$e(e,t,n)}}function $e(e,t,n){const a=Ft(e);a&&(a.scrollParent.scrollBy(t,n),setTimeout(()=>{$e(e,t,n)},"touchedNode"in a?10:100))}function Ht(e){if(!i)return;const{x:t,y:n}=R(e.e);i.coordinates.y=n,i.coordinates.x=t,ne(),Jt(e,i)}function Zt(e){if(!i)return;const{x:t,y:n}=R(e.e);i.coordinates.y=n,i.coordinates.x=t,ne(),ae(e,i)}function Wt(e){i&&ae(e.detail,i)}function Xt(e,t){if(e.targetData.parent.el===t.lastParent.el)return!1;const n=e.targetData.parent.data.config;if(n.dropZone===!1)return!1;const a=t.initialParent.data.config;return n.accepts?n.accepts(e.targetData.parent,t.initialParent,t.lastParent,t):!(!n.group||n.group!==a.group)}function Jt(e,t){var n;e.e.preventDefault(),e.e.stopPropagation(),e.targetData.parent.el===((n=t.lastParent)==null?void 0:n.el)?Le(e,t):ae(e,t)}function Yt(e,t,n,a){var k;if(t.remapJustFinished)return t.remapJustFinished=!1,t.lastTargetValue=e.targetData.node.data.value,!1;if(t.lastTargetValue===e.targetData.node.data.value||t.draggedNodes.map(w=>w.el).includes(e.targetData.node.el)||t.preventEnter||t.swappedNodeValue===e.targetData.node.data.value||e.targetData.parent.el!==((k=t.lastParent)==null?void 0:k.el)||e.targetData.parent.data.config.sortable===!1)return!1;const r=e.targetData.node.el.getBoundingClientRect(),l=t.draggedNode.el.getBoundingClientRect(),o=r.y-l.y,d=r.x-l.x;let s;const u=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter(w=>u[0]<=w.data.index&&w.data.index<=u[1]&&w.el!==t.draggedNode.el),Math.abs(o)>Math.abs(d)?s=o>0?"above":"below":s=d>0?"left":"right";const h=t.lastParent.data.config.threshold;switch(s){case"left":if(n>r.x+r.width*h.horizontal)return t.incomingDirection="left",!0;break;case"right":if(n<r.x+r.width*(1-h.horizontal))return t.incomingDirection="right",!0;break;case"above":if(a>r.y+r.height*h.vertical)return t.incomingDirection="above",!0;break;case"below":if(a<r.y+r.height*(1-h.vertical))return t.incomingDirection="below",!0;break}return!1}function Le(e,t){const{x:n,y:a}=R(e.e);Yt(e,t,n,a)&&(t.swappedNodeValue=e.targetData.node.data.value,t.preventEnter=!0,e.targetData.parent.data.config.performSort(t,e))}function U(e){function t(n){var o;const a=S.get(n),r=n.parentNode||((o=i==null?void 0:i.lastParent)==null?void 0:o.el);if(!a)return;const l=E.get(r);if(l)return{node:{el:n,data:a},parent:{el:r,data:l}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function jt(e,t){const n=Ee(e),a=de(e.lastParent.el,e.lastParent.data).filter(d=>!n.includes(d)),r=de(t.targetData.parent.el,t.targetData.parent.data),l=e.initialParent.el===t.targetData.parent.el&&t.targetData.parent.data.config.sortable===!1;let o;"node"in t.targetData?(l?o=e.initialIndex:t.targetData.parent.data.config.sortable===!1?o=t.targetData.parent.data.enabledNodes.length:o=t.targetData.node.data.index,r.splice(o,0,...n)):(o=l?e.initialIndex:t.targetData.parent.data.enabledNodes.length,r.splice(o,0,...n)),ce(e.lastParent.el,e.lastParent.data,a),ce(t.targetData.parent.el,t.targetData.parent.data,r)}function ae(e,t){Xt(e,t)&&(e.targetData.parent.data.config.performTransfer(t,e),t.lastParent=e.targetData.parent)}function Gt(e){function t(n){const a=E.get(n);if(a)return{parent:{el:n,data:a}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function be(e){if(e instanceof HTMLElement)return e;if(e.value instanceof HTMLElement)return e.value;if("$el"in e&&e.$el instanceof HTMLElement)return e.$el}function Qt(e,t){Array.isArray(e)||(e=[e]);for(const n of e){const a=be(n);if(a)return t(a);const r=q(n,l=>{if(!l)return;const o=be(l);o?t(o):console.warn("Invalid parent element",l),r()})}}var fe=new WeakMap;function en(e){const t=fe.get(e);return t?t.value:(console.warn("No values found for parent element"),[])}function tn(e,t){const n=fe.get(t);n&&(n.value=e)}function Oe(e){xe&&(Array.isArray(e)||(e=[e]),e.forEach(t=>{const{parent:n,values:a,...r}=t;Qt(n,nn(r,a))}))}function nn(e,t){return n=>{fe.set(n,t),pt({parent:n,getValues:en,setValues:tn,config:{...e,dropZones:[]}})}}const an=y("p",{class:"mb-1"}," Assigned ",-1),rn={__name:"KanbanBoardEditDrawer",props:{kanbanItem:{type:null,required:!1,default:()=>({item:{title:"",dueDate:"2022-01-01T00:00:00Z",labels:[],members:[],id:0,attachments:0,commentsCount:0,image:"",comments:""},boardId:0,boardName:""})},isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","update:kanbanItem","deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r=T(),l=["UX","Image","Code Review","Dashboard","Bug","Charts & maps"],o=T(JSON.parse(JSON.stringify(n.kanbanItem.item))),d=p=>{var v;a("update:isDrawerOpen",p),p||(v=r.value)==null||v.reset()};q(()=>n.kanbanItem,()=>{o.value=JSON.parse(JSON.stringify(n.kanbanItem.item))},{deep:!0});const s=()=>{var p;(p=r.value)==null||p.validate().then(async v=>{var A;v.valid&&(a("update:kanbanItem",{item:o.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1),await ze(),(A=r.value)==null||A.reset())})},u=()=>{a("deleteKanbanItem",{item:o.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1)},h={UX:"success",Image:"warning","Code Review":"info",Dashboard:"primary",Bug:"error","Charts & maps":"primary"},k=[{img:Ke,name:"John Doe"},{img:Re,name:"Jane Smith"},{img:Ue,name:"Robert Johnson"},{img:qe,name:"Lucy Brown"},{img:Me,name:"Mike White"},{img:He,name:"Anna Black"}],w=T();return(p,v)=>{const A=Ye,H=Je,F=Fe("IconBtn");return D(),P(tt,{location:"end",width:370,temporary:"",border:"0","model-value":n.isDrawerOpen,"onUpdate:modelValue":d},{default:g(()=>[c(A,{title:"Edit Task",onCancel:v[0]||(v[0]=N=>p.$emit("update:isDrawerOpen",!1))}),c(Ge),c(m(je),{options:{wheelPropagation:!1},style:{"block-size":"calc(100vh - 4rem)"}},{default:g(()=>[m(o)?(D(),P(m(Q),{key:0,ref_key:"refEditTaskForm",ref:r,onSubmit:Z(s,["prevent"])},{default:g(()=>[c(ve,null,{default:g(()=>[c(Qe,null,{default:g(()=>[c(z,{cols:"12"},{default:g(()=>[c(ue,{modelValue:m(o).title,"onUpdate:modelValue":v[1]||(v[1]=N=>m(o).title=N),label:"Title",rules:["requiredValidator"in p?p.requiredValidator:m(j)]},null,8,["modelValue","rules"])]),_:1}),c(z,{cols:"12"},{default:g(()=>[c(H,{modelValue:m(o).dueDate,"onUpdate:modelValue":v[2]||(v[2]=N=>m(o).dueDate=N),label:"Due date"},null,8,["modelValue"])]),_:1}),c(z,{cols:"12"},{default:g(()=>[c(me,{modelValue:m(o).labels,"onUpdate:modelValue":v[3]||(v[3]=N=>m(o).labels=N),items:l,label:"Label",multiple:"",eager:""},{chip:g(({item:N})=>[c(De,{color:h[N.raw]},{default:g(()=>[B(O(N.raw),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])]),_:1}),c(z,{cols:"12"},{default:g(()=>[an,y("div",null,[c(me,{modelValue:m(o).members,"onUpdate:modelValue":v[4]||(v[4]=N=>m(o).members=N),items:k,"item-title":"name","item-value":"name",multiple:"","return-object":"",variant:"plain","menu-props":{offset:10},class:"assignee-select"},{selection:g(({item:N})=>[c(Ne,{size:"26"},{default:g(()=>[c(se,{src:N.raw.img},null,8,["src"]),c(ye,{activator:"parent"},{default:g(()=>[B(O(N.raw.name),1)]),_:2},1024)]),_:2},1024)]),"prepend-inner":g(()=>[c(F,{size:"26",variant:"tonal",class:"mt-1"},{default:g(()=>[c($,{size:"20",icon:"ri-add-line"})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),c(z,{cols:"12"},{default:g(()=>[c(et,{modelValue:m(w),"onUpdate:modelValue":v[5]||(v[5]=N=>W(w)?w.value=N:null),label:"Choose file",multiple:""},null,8,["modelValue"])]),_:1}),c(z,{cols:"12"},{default:g(()=>[c(we,{modelValue:m(o).comments,"onUpdate:modelValue":v[6]||(v[6]=N=>m(o).comments=N),label:"Comment",placeholder:"Write a comment...",rows:"5",textarea:""},null,8,["modelValue"])]),_:1}),c(z,{cols:"12"},{default:g(()=>[c(M,{type:"submit",class:"me-3"},{default:g(()=>[B(" Update ")]),_:1}),c(M,{color:"error",variant:"outlined",onClick:u},{default:g(()=>[B(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)):C("",!0)]),_:1})]),_:1},8,["model-value"])}}},on={class:"d-flex align-start gap-2"},ln={key:0,class:"d-flex flex-wrap gap-2"},sn={class:"text-base text-high-emphasis mb-0"},dn={class:"task-footer d-flex align-center flex-wrap justify-space-between"},cn={key:0,class:"d-flex align-center gap-1 mt-2"},un={key:0,class:"d-flex align-center gap-1"},fn={class:"me-3"},mn={key:1,class:"d-flex align-center gap-1"},pn={key:1,class:"v-avatar-group mt-2"},gn={__name:"KanbanCard",props:{item:{type:null,required:!0},boardId:{type:Number,required:!0},boardName:{type:String,required:!0}},emits:["deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r={UX:"success",Image:"warning","Code Review":"info",Dashboard:"primary",Bug:"error","Charts & maps":"primary"},l=[{title:"Copy Task link",link:!0},{title:"Duplicate Task",link:!0},{title:"Delete",onClick:()=>{a("deleteKanbanItem",{item:n.item,boardId:n.boardId,boardName:n.boardName})}}];return(o,d)=>e.item?(D(),P(it,{key:0,ripple:!1,link:!1,class:"kanban-card position-relative"},{default:g(()=>[c(ve,{class:"d-flex flex-column gap-2"},{default:g(()=>[y("div",on,[e.item.labels&&e.item.labels.length?(D(),V("div",ln,[(D(!0),V(X,null,G(e.item.labels,s=>(D(),P(De,{key:s,size:"small",color:r[s]},{default:g(()=>[B(O(s),1)]),_:2},1032,["color"]))),128))])):C("",!0),c(rt),c(ot,null,{activator:g(({props:s,isActive:u})=>[c($,Ze(s,{icon:"ri-more-2-line",class:"position-absolute more-options",style:[{"inset-block-start":"16px","inset-inline-end":"10px"},u?"opacity: 1":""],size:"20",onClick:d[0]||(d[0]=Z(()=>{},["stop"]))}),null,16,["style"])]),default:g(()=>[c(lt,{items:l,"item-props":""})]),_:1})]),e.item.image&&e.item.image.length?(D(),P(se,{key:0,src:e.item.image,class:"rounded-lg"},null,8,["src"])):C("",!0),y("p",sn,O(e.item.title),1),y("div",dn,[e.item.attachments||e.item.commentsCount?(D(),V("div",cn,[e.item.attachments?(D(),V("div",un,[c($,{size:"20",icon:"ri-attachment-2"}),y("span",fn,O(e.item.attachments),1)])):C("",!0),e.item.commentsCount?(D(),V("div",mn,[c($,{size:"20",icon:"ri-wechat-line"}),y("span",null,O(e.item.commentsCount),1)])):C("",!0)])):C("",!0),e.item.members&&e.item.members.length?(D(),V("div",pn,[(D(!0),V(X,null,G(e.item.members,s=>(D(),P(Ne,{key:s.name,size:"30"},{default:g(()=>[c(se,{src:s.img},null,8,["src"]),c(ye,{activator:"parent"},{default:g(()=>[B(O(s.name),1)]),_:2},1024)]),_:2},1024))),128))])):C("",!0)])]),_:1})]),_:1})):C("",!0)}},hn=at(gn,[["__scopeId","data-v-4d1b1d6b"]]),bn={class:"kanban-board"},vn={class:"kanban-board-header pb-4"},Dn={class:"d-flex align-center gap-1 h-100"},Nn={key:1,class:"d-flex align-center justify-space-between"},yn={class:"text-lg font-weight-medium text-truncate"},wn={class:"d-flex align-center"},kn={class:"add-new-form"},xn={class:"mb-4"},Tn={class:"d-flex gap-3 flex-wrap"},Vn={__name:"KanbanItems",props:{kanbanIds:{type:Array,required:!0},groupName:{type:String,required:!0},boardName:{type:String,required:!0},boardId:{type:Number,required:!0},kanbanData:{type:null,required:!0}},emits:["renameBoard","deleteBoard","addNewItem","editItem","updateItemsState","deleteItem"],setup(e,{emit:t}){const n=e,a=t,r=T(),l=T(n.boardName),o=T(n.kanbanIds),d=T(!1),s=T(!1),u=T(),h=T(""),k=T(),w=[{title:"Rename",prependIcon:"ri-pencil-line",onClick:()=>{s.value=!0}},{title:"Delete",prependIcon:"ri-delete-bin-7-line",onClick:()=>a("deleteBoard",n.boardId)}],p=()=>{var b;(b=k.value)==null||b.validate().then(f=>{f.valid&&(a("renameBoard",{oldName:n.boardName,newName:l.value,boardId:n.boardId}),s.value=!1)})},v=()=>{var b;(b=u.value)==null||b.validate().then(f=>{f.valid&&(a("addNewItem",{itemTitle:h.value,boardName:n.boardName,boardId:n.boardId}),d.value=!1,h.value="")})};Oe({parent:r,values:o,group:n.groupName,draggable:b=>b.classList.contains("kanban-card"),plugins:[Ce()]}),q(()=>n,()=>{o.value=n.kanbanIds},{immediate:!0,deep:!0}),q(o,()=>{a("updateItemsState",{boardId:n.boardId,ids:o.value}),te(r.value)},{deep:!0});const A=b=>n.kanbanData.items.find(f=>f.id===b),H=b=>{a("deleteItem",b)},F=()=>{var b;d.value=!1,(b=u.value)==null||b.reset()};ie(u,F),ie(k,()=>{s.value=!1});const N=()=>{s.value=!1,l.value=n.boardName},re=b=>{b.key==="Enter"&&!b.shiftKey&&v()};return(b,f)=>{const I=nt;return D(),V("div",bn,[y("div",vn,[m(s)?(D(),P(m(Q),{key:0,ref_key:"refKanbanBoardTitle",ref:k,onSubmit:Z(p,["prevent"])},{default:g(()=>[c(ue,{modelValue:m(l),"onUpdate:modelValue":f[0]||(f[0]=x=>W(l)?l.value=x:null),density:"compact",autofocus:"",variant:"underlined",rules:["requiredValidator"in b?b.requiredValidator:m(j)],"hide-details":"",class:"rename-board-title-input mt-n3",onKeydown:Y(N,["esc"])},{"append-inner":g(()=>[y("div",Dn,[c($,{size:"small",variant:"text",color:"success",icon:"ri-check-line",class:"cursor-pointer",onClick:p}),c($,{size:"small",variant:"text",color:"error",icon:"ri-close-line",class:"cursor-pointer",onClick:N})])]),_:1},8,["modelValue","rules"])]),_:1},512)):(D(),V("div",Nn,[y("h4",yn,O(e.boardName),1),y("div",wn,[c($,{class:"drag-handler",size:"20",icon:"ri-drag-move-fill"}),c(I,{size:"x-small","icon-size":"20","menu-list":w,"item-props":"",class:"text-high-emphasis"})])]))]),m(o)?(D(),V("div",{key:0,ref_key:"refKanbanBoard",ref:r,class:We(["kanban-board-drop-zone rounded d-flex flex-column gap-4",m(o).length?"mb-4":""])},[(D(!0),V(X,null,G(m(o),x=>(D(),P(hn,{key:x,item:A(x),"board-id":n.boardId,"board-name":n.boardName,onDeleteKanbanItem:H,onClick:_n=>a("editItem",{item:A(x),boardId:n.boardId,boardName:n.boardName})},null,8,["item","board-id","board-name","onClick"]))),128)),y("div",kn,[y("h6",{class:"text-base font-weight-medium cursor-pointer",onClick:f[1]||(f[1]=x=>d.value=!m(d))},[c($,{size:"15",icon:"ri-add-line"}),B(" Add New ")]),m(d)?(D(),P(m(Q),{key:0,ref_key:"refForm",ref:u,class:"mt-4","validate-on":"submit",onSubmit:Z(v,["prevent"])},{default:g(()=>[y("div",xn,[c(we,{modelValue:m(h),"onUpdate:modelValue":f[2]||(f[2]=x=>W(h)?h.value=x:null),density:"compact",rules:["requiredValidator"in b?b.requiredValidator:m(j)],placeholder:"Add Content",autofocus:"",rows:"2",onKeydown:[Y(re,["enter"]),Y(F,["esc"])]},null,8,["modelValue","rules"])]),y("div",Tn,[c(M,{size:"small",type:"submit"},{default:g(()=>[B(" Add ")]),_:1}),c(M,{size:"small",variant:"outlined",color:"secondary",onClick:F},{default:g(()=>[B(" Cancel ")]),_:1})])]),_:1},512)):C("",!0)])],2)):C("",!0)])}}},In={class:"kanban-main-wrapper d-flex gap-6 h-100"},Cn={class:"add-new-form text-no-wrap",style:{"inline-size":"10rem"}},Pn={class:"mb-4"},Bn={class:"d-flex gap-3"},En={__name:"KanbanBoard",props:{kanbanData:{type:null,required:!0},groupName:{type:String,required:!1,default:"kanban"}},emits:["addNewBoard","renameBoard","deleteBoard","addNewItem","editItem","deleteItem","updateItemsState","updateBoardState"],setup(e,{emit:t}){const n=e,a=t,r=T(),l=T(n.kanbanData.boards),o=T(!1),d=T(!1),s=T(),u=T(""),h=T(),k=()=>{var f;(f=s.value)==null||f.validate().then(I=>{I.valid&&(a("addNewBoard",u.value),d.value=!1,u.value="")})},w=f=>{a("deleteBoard",f)},p=f=>{a("renameBoard",f)},v=f=>{a("addNewItem",f)},A=f=>{f&&(h.value=f,o.value=!0)},H=f=>{a("updateItemsState",f)};Oe({parent:r,values:l,dragHandle:".drag-handler",plugins:[Ce()]}),q(()=>n,()=>{l.value=n.kanbanData.boards,te(r.value)},{deep:!0});const F=f=>{a("editItem",f)},N=f=>{a("deleteItem",f)};q(l,()=>{const f=l.value.map(I=>I.id);a("updateBoardState",f)},{deep:!0});const re=()=>n.kanbanData.boards.some(f=>u.value&&f.title.toLowerCase()===u.value.toLowerCase())?"Board title already exists":!0,b=()=>{var f;d.value=!1,(f=s.value)==null||f.reset()};return ie(s,b),(f,I)=>(D(),V(X,null,[y("div",In,[y("div",{ref_key:"kanbanWrapper",ref:r,class:"d-flex gap-6"},[(D(!0),V(X,null,G(m(l),x=>(D(),P(Vn,{key:x.id,"group-name":e.groupName,"kanban-ids":x.itemsIds,"board-name":x.title,"board-id":x.id,"kanban-items":e.kanbanData.items,"kanban-data":e.kanbanData,onDeleteBoard:w,onRenameBoard:p,onAddNewItem:v,onEditItem:A,onUpdateItemsState:H,onDeleteItem:N},null,8,["group-name","kanban-ids","board-name","board-id","kanban-items","kanban-data"]))),128))],512),y("div",Cn,[y("h6",{class:"text-lg font-weight-medium cursor-pointer",onClick:I[0]||(I[0]=x=>d.value=!m(d))},[c($,{size:"18",icon:"ri-add-line"}),B(" Add New ")]),m(d)?(D(),P(m(Q),{key:0,ref_key:"refAddNewBoard",ref:s,class:"mt-4","validate-on":"submit",onSubmit:Z(k,["prevent"])},{default:g(()=>[y("div",Pn,[c(ue,{modelValue:m(u),"onUpdate:modelValue":I[1]||(I[1]=x=>W(u)?u.value=x:null),density:"compact",rules:["requiredValidator"in f?f.requiredValidator:m(j),re],autofocus:"",placeholder:"Add Board Title",onKeydown:Y(b,["esc"])},null,8,["modelValue","rules"])]),y("div",Bn,[c(M,{size:"small",type:"submit"},{default:g(()=>[B(" Add ")]),_:1}),c(M,{size:"small",variant:"outlined",color:"secondary",type:"reset",onClick:b},{default:g(()=>[B(" Cancel ")]),_:1})])]),_:1},512)):C("",!0)])]),c(rn,{"is-drawer-open":m(o),"onUpdate:isDrawerOpen":I[2]||(I[2]=x=>W(o)?o.value=x:null),"kanban-item":m(h),"onUpdate:kanbanItem":F,onDeleteKanbanItem:N},null,8,["is-drawer-open","kanban-item"])],64))}},xa={__name:"index",async setup(e){let t,n;const{data:a,execute:r}=([t,n]=Xe(()=>st("/apps/kanban")),t=await t,n(),t),l=async p=>{await L("/apps/kanban/board/add",{method:"POST",body:{title:p}}),r()},o=async p=>{await L(`/apps/kanban/board/${p}`,{method:"DELETE"}),r()},d=async p=>{await L("/apps/kanban/board/rename",{method:"PUT",body:p}),r()},s=async p=>{await L("/apps/kanban/item/add",{method:"POST",body:p}),r()},u=async p=>{await L("/apps/kanban/item/update",{method:"PUT",body:p}),r()},h=async p=>{p.item&&p.item.id&&(await L(`/apps/kanban/item/${p.item.id}`,{method:"DELETE",body:p}),r())},k=async p=>{await L("/apps/kanban/item/state-update",{method:"PUT",body:p})},w=async p=>{await L("/apps/kanban/board/state-update",{method:"PUT",body:p})};return(p,v)=>m(a)?(D(),P(En,{key:0,"kanban-data":m(a),onAddNewBoard:l,onDeleteBoard:o,onRenameBoard:d,onAddNewItem:s,onEditItem:u,onDeleteItem:h,onUpdateItemsState:k,onUpdateBoardState:w},null,8,["kanban-data"])):C("",!0)}};export{xa as default};
